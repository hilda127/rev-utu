"use strict";(self.webpackChunkcreate_react_app=self.webpackChunkcreate_react_app||[]).push([[840],{9340:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(5861),l=a(7757),o=a.n(l),c=a(7294),r=a(1597),i=a(660),u=a(5900),m=a.n(u),d=a(3419),s=a(6059),p=a(7760),h=a(1283),g=a(2267);function f(e){var t=e.className;return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:t},c.createElement("path",{d:"M272.07 512h-32.14a47.19 47.19 0 01-47.13-47.13V454a206.7 206.7 0 01-32.1-13.33l-7.7 7.7c-18.66 18.69-48.55 18.14-66.67 0l-22.7-22.71c-18.16-18.13-18.68-48 0-66.66l7.7-7.7A206.71 206.71 0 0158 319.2H47.13A47.19 47.19 0 010 272.07v-32.14a47.19 47.19 0 0147.13-47.13H58a206.75 206.75 0 0113.33-32.1l-7.7-7.7c-18.67-18.65-18.16-48.53 0-66.66l22.71-22.72a47.13 47.13 0 0166.67 0l7.7 7.7A206.9 206.9 0 01192.8 58V47.13A47.19 47.19 0 01239.93 0h32.14a47.19 47.19 0 0147.13 47.13V58a206.7 206.7 0 0132.1 13.33l7.7-7.7c18.66-18.69 48.55-18.14 66.67 0l22.7 22.71c18.16 18.13 18.68 48 0 66.67l-7.7 7.7A206.71 206.71 0 01454 192.8h10.87A47.19 47.19 0 01512 239.93v32.14a47.19 47.19 0 01-47.13 47.13H454a206.75 206.75 0 01-13.33 32.1l7.7 7.7c18.67 18.65 18.16 48.53 0 66.67l-22.71 22.7a47.13 47.13 0 01-66.67 0l-7.7-7.7A206.9 206.9 0 01319.2 454v10.87A47.19 47.19 0 01272.07 512zM165.72 409.17a176.81 176.81 0 0045.83 19.02 15 15 0 0111.25 14.53v22.15c0 9.44 7.69 17.13 17.13 17.13h32.14c9.44 0 17.13-7.69 17.13-17.13v-22.15a15 15 0 0111.25-14.53 176.81 176.81 0 0045.83-19.02 15 15 0 0118.25 2.3l15.69 15.7a17.13 17.13 0 0024.22 0l22.73-22.72a17.13 17.13 0 000-24.23l-15.7-15.7a15 15 0 01-2.3-18.24 176.78 176.78 0 0019.03-45.83 15 15 0 0114.52-11.25h22.15c9.44 0 17.13-7.68 17.13-17.13v-32.14c0-9.44-7.69-17.13-17.13-17.13h-22.15a15 15 0 01-14.52-11.25 176.82 176.82 0 00-19.03-45.83 15 15 0 012.3-18.24l15.7-15.7a17.13 17.13 0 000-24.22l-22.72-22.72a17.13 17.13 0 00-24.23 0l-15.7 15.69a15 15 0 01-18.24 2.3 176.81 176.81 0 00-45.83-19.02 15 15 0 01-11.25-14.53V47.13c0-9.44-7.69-17.13-17.13-17.13h-32.14a17.15 17.15 0 00-17.13 17.13v22.15a15 15 0 01-11.25 14.53 176.81 176.81 0 00-45.83 19.02 15 15 0 01-18.25-2.3l-15.68-15.7a17.13 17.13 0 00-24.23 0l-22.72 22.73a17.13 17.13 0 00-.01 24.22l15.7 15.7a15 15 0 012.3 18.24 176.78 176.78 0 00-19.02 45.83 15 15 0 01-14.53 11.25H47.13A17.15 17.15 0 0030 239.93v32.14c0 9.44 7.69 17.13 17.13 17.13h22.15a15 15 0 0114.52 11.25 176.82 176.82 0 0019.03 45.83 15 15 0 01-2.3 18.24l-15.7 15.7a17.13 17.13 0 000 24.22l22.72 22.72a17.13 17.13 0 0024.23 0l15.7-15.69c3.56-3.56 10.98-6.59 18.24-2.3z"}),c.createElement("path",{d:"M256 367.4c-61.43 0-111.4-49.97-111.4-111.4S194.57 144.6 256 144.6 367.4 194.57 367.4 256 317.43 367.4 256 367.4zm0-192.8c-44.88 0-81.4 36.52-81.4 81.4s36.52 81.4 81.4 81.4 81.4-36.52 81.4-81.4-36.52-81.4-81.4-81.4z"}))}var k=a(3916),v=a(2594),B=a(9800),E="BookTemplate-module--footerNavButton--o+QWW",N="BookTemplate-module--headerNavButton--fAKBJ";function w(e){var t=e.data,a=t.bookMeta,n=a.dimensions,l=a.name,o=t.bookPages,i=e.pageContext,u=i.prevPath,m=i.nextPath,d=(0,c.useMemo)((function(){return(0,p.pe)(l)}),[l]),s=(0,v.Z)("reading_mode","0"),g=s[0],f=s[1],k=(0,B.Z)(),N=k.width,w=k.height,H=(0,c.useState)(!0),P=H[0],A=H[1],C=(0,c.useCallback)((function(e){var t=document.getElementById("page-"+e);if(t.getBoundingClientRect().top<-5)t.scrollIntoView();else if(e>0){document.getElementById("page-"+(e-1)).scrollIntoView()}}),[]),R=(0,c.useCallback)((function(e){var t=document.getElementById("page-"+e);if(t.getBoundingClientRect().top>5)t.scrollIntoView();else if(e<o.edges.length-1){document.getElementById("page-"+(e+1)).scrollIntoView()}}),[]);function b(e,t){var a=window.innerWidth,n=e.clientX;n<a/10?C(t):n<9*a/10?A((function(e){return!e})):R(t)}return(0,c.useEffect)((function(){}),[C,R]),c.createElement(h.Z,null,c.createElement(T,{title:d,hidden:P,onSettingsButtonClick:function(){f(String((parseInt(g)+1)%3))},prevPath:u,nextPath:m}),o.edges.map((function(e,t){var a=e.node.publicURL,l=n[t],o=l[0],r=l[1];return c.createElement(x,{index:t,pageHeight:r,pageWidth:o,publicURL:a,readingMode:g,windowHeight:w,windowWidth:N,onPageClick:b,key:a})})),c.createElement("div",{className:"BookTemplate-module--footer--mRAeM"},null!=u?c.createElement(r.Link,{to:u,className:E},"PREV"):null,null!=m?c.createElement(r.Link,{to:m,className:E},"NEXT"):null))}function T(e){var t,a=e.title,n=e.hidden,l=e.onSettingsButtonClick,o=e.prevPath,i=e.nextPath,u=m()("BookTemplate-module--header--4udBQ",((t={})["BookTemplate-module--headerHidden--HHAj3"]=n,t));return c.createElement("div",{className:u},c.createElement("div",{className:"BookTemplate-module--headerLeftSection--fHNou"},c.createElement(r.Link,{to:"/",className:"BookTemplate-module--headerBackLink--pFjGl"},c.createElement(g.Z,{className:"BookTemplate-module--headerBackIcon--0k6rd"})),c.createElement("div",null,c.createElement("p",{className:"BookTemplate-module--headerTitle--Ba0Qi"},a)),null!=o?c.createElement(r.Link,{to:o,className:N},"PREV"):null,null!=i?c.createElement(r.Link,{to:i,className:N},"NEXT"):null),c.createElement("div",{className:"BookTemplate-module--headerRightSection--hPdRu"},c.createElement("button",{className:"BookTemplate-module--headerButton--AOZcV",onClick:l},c.createElement(f,{className:"BookTemplate-module--headerIcon--0XrgX"}))))}function x(e){var t,a=e.index,l=e.pageHeight,r=e.pageWidth,u=e.publicURL,p=e.readingMode,h=e.windowHeight,g=e.windowWidth,f=e.onPageClick,v=(0,c.useState)(null),B=v[0],E=v[1],N=(0,c.useState)(null),w=N[0],T=N[1],x=(0,c.useRef)(!1),H=(0,i.YD)({rootMargin:2.5*h+"px 0px "+3.5*h+"px"}),P=H.ref,A=H.inView;(0,c.useEffect)((function(){function e(){return(e=(0,n.Z)(o().mark((function e(){var t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.d)(u,1e3,5);case 2:return t=e.sent,e.next=5,t.arrayBuffer();case 5:a=e.sent,E((0,d.nN)(a));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}A&&!x.current&&(!function(){e.apply(this,arguments)}(),x.current=!0)}),[A,u]),(0,c.useEffect)((function(){return A&&T((0,d.T4)(B)),function(){null!=w&&URL.revokeObjectURL(w)}}),[B,A]);var C=h/g,R=l/r,b="1"!==p,I=m()("BookTemplate-module--page--767ks",((t={})["BookTemplate-module--pageSpanWidth--NH2X7"]=b,t["BookTemplate-module--pageSpanHeight--+tUNP"]=!b,t["BookTemplate-module--pageWebtoon--6scOl"]="2"===p,t));return c.createElement("div",{className:I,id:"page-"+a,ref:P,onClick:function(e){return f(e,a)}},c.createElement("div",{className:"BookTemplate-module--pageWrapper--oPmzd",style:b?void 0:{width:R<C?"100%":100/R+"vh"}},b?c.createElement("div",{className:"BookTemplate-module--pagePadding--vQxtc",style:{paddingTop:100*R+"%"}}):null,A&&null!=w?c.createElement(k.Z,{className:"BookTemplate-module--pageImage--jAHaD",src:w}):null))}}}]);
//# sourceMappingURL=component---src-templates-book-template-js-35c12e5d7447688781c2.js.map