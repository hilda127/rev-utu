"use strict";(self.webpackChunkcreate_react_app=self.webpackChunkcreate_react_app||[]).push([[840],{512:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(7294),o=n(5861),l=n(4687),r=n.n(l),i=n(748),c=n(660),u=n(5900),d=n.n(u),s=n(4220),m=n(3954),g=n(8059),f=n(3234),k=n(1728);function p(e){var t=e.className;return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",className:t},a.createElement("path",{fill:"#000",fillOpacity:".01",d:"M0 0h48v48H0z"}),a.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M34 24H6m16-12 12 12-12 12m20-24v24"}))}function h(e){var t=e.className;return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",className:t},a.createElement("path",{fill:"#000","fill-opacity":".01",d:"M0 0h48v48H0z"}),a.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M14 24h28M26 36 14 24l12-12M5 36V12"}))}var v=n(2342),E=n(6689),w=n(8810),B="PageBook-module--footerNavButton--oqrRx",P="PageBook-module--headerButton--ZaX2H",N="PageBook-module--headerIcon--sdxsP",b="PageBook-module--headerNavButton--Dn5UH",L="0";function C(e){var t=e.data,n=t.bookMeta,o=n.dimensions,l=n.name,r=t.bookPages,c=e.pageContext,u=c.prevPath,d=c.nextPath,s=(0,a.useMemo)((function(){return(0,g.pe)(l)}),[l]),m=(0,E.Z)("reading_mode","0"),k=m[0],p=m[1],h=(0,E.Z)("directon",L),v=h[0],P=h[1],N=(0,w.Z)(),b=N.width,C=N.height,y=(0,a.useState)(!0),R=y[0],I=y[1],H=(0,a.useCallback)((function(e){var t=document.getElementById("page-"+e);if(t.getBoundingClientRect().top<-5)t.scrollIntoView();else if(e>0){document.getElementById("page-"+(e-1)).scrollIntoView()}}),[]),W=(0,a.useCallback)((function(e){var t=document.getElementById("page-"+e);if(t.getBoundingClientRect().top>5)t.scrollIntoView();else if(e<r.edges.length-1){document.getElementById("page-"+(e+1)).scrollIntoView()}}),[]);(0,a.useEffect)((function(){function e(e,t){var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:e,clientY:t});document.elementFromPoint(e,t).dispatchEvent(n)}function t(t){var n=t.key;"ArrowLeft"===n?e(b/12,C/2):"ArrowRight"===n&&e(11*b/12,C/2)}return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);var Z=(0,a.useCallback)((function(e,t){var n=window.innerWidth,a=e.clientX;a<n/10?v===L?H(t):W(t):a<9*n/10?I((function(e){return!e})):v===L?W(t):H(t)}),[H,W,I,v]),S=(0,a.useCallback)((function(){p(String((parseInt(k)+1)%3))}),[p,k]),U=(0,a.useCallback)((function(){P(String((parseInt(v)+1)%2))}),[P,v]);return a.createElement(f.Z,null,a.createElement(x,{title:s,hidden:R,onReadingModeButtonClick:S,onDirectionButtonClick:U,readingMode:k,direction:v,prevPath:u,nextPath:d}),r.edges.map((function(e,t){var n=e.node.publicURL,l=o[t],r=l[0],i=l[1];return a.createElement(M,{index:t,pageHeight:i,pageWidth:r,publicURL:n,readingMode:k,windowHeight:C,windowWidth:b,onPageClick:Z,key:n})})),a.createElement("div",{className:"PageBook-module--footer--ZlGhm"},null!=u?a.createElement(i.Link,{to:u,className:B},"PREV"):null,null!=d?a.createElement(i.Link,{to:d,className:B},"NEXT"):null))}function x(e){var t,n=e.title,o=e.hidden,l=e.readingMode,r=e.direction,c=e.onReadingModeButtonClick,u=e.onDirectionButtonClick,s=e.prevPath,m=e.nextPath,g=d()("PageBook-module--header--X7m9B",((t={})["PageBook-module--headerHidden--oTfdR"]=o,t)),f=(0,a.useMemo)((function(){return"1"===l?"H":"0"===l?"W":"T"}),[l]);return a.createElement("div",{className:g},a.createElement("div",{className:"PageBook-module--headerLeftSection--ycUBL"},a.createElement(i.Link,{to:"/",className:"PageBook-module--headerBackLink--bZ3Kj"},a.createElement(k.Z,{className:"PageBook-module--headerBackIcon--WJDWn"})),a.createElement("div",null,a.createElement("p",{className:"PageBook-module--headerTitle--Lhbag"},n)),null!=s?a.createElement(i.Link,{to:s,className:b},"PREV"):null,null!=m?a.createElement(i.Link,{to:m,className:b},"NEXT"):null),a.createElement("div",{className:"PageBook-module--headerRightSection--8JcJi"},a.createElement("button",{className:P,onClick:u},r===L?a.createElement(p,{className:N}):a.createElement(h,{className:N})),a.createElement("button",{className:P,onClick:c},a.createElement("span",{className:"PageBook-module--headerIconText--9+hc4"},f))))}function M(e){var t,n=e.index,l=e.pageHeight,i=e.pageWidth,u=e.publicURL,g=e.readingMode,f=e.windowHeight,k=e.windowWidth,p=e.onPageClick,h=(0,a.useState)(null),E=h[0],w=h[1],B=(0,a.useState)(null),P=B[0],N=B[1],b=(0,a.useRef)(!1),L=(0,c.YD)({rootMargin:2.5*f+"px 0px "+3.5*f+"px"}),C=L.ref,x=L.inView;(0,a.useEffect)((function(){function e(){return(e=(0,o.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.d)(u,1e3,5);case 2:return t=e.sent,e.next=5,t.arrayBuffer();case 5:n=e.sent,w((0,s.nN)(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x&&!b.current&&(!function(){e.apply(this,arguments)}(),b.current=!0)}),[x,u]),(0,a.useEffect)((function(){return x&&N((0,s.T4)(E)),function(){null!=P&&URL.revokeObjectURL(P)}}),[E,x]);var M=f/k,y=l/i,R="1"!==g,I=d()("PageBook-module--page--v0sZP",((t={})["PageBook-module--pageSpanWidth--1BlA+"]=R,t["PageBook-module--pageSpanHeight--lDq2Q"]=!R,t["PageBook-module--pageWebtoon--14fsE"]="2"===g,t));return a.createElement("div",{className:I,id:"page-"+n,ref:C,onClick:function(e){return p(e,n)}},a.createElement("div",{className:"PageBook-module--pageWrapper--m-1hH",style:R?void 0:{width:y<M?"100%":100/y+"vh"}},R?a.createElement("div",{className:"PageBook-module--pagePadding--FXsCU",style:{paddingTop:100*y+"%"}}):null,x&&null!=P?a.createElement(v.Z,{className:"PageBook-module--pageImage--kkc6U",src:P}):null))}function y(e){return a.createElement(C,e)}}}]);
//# sourceMappingURL=component---src-templates-book-template-js-cc220dafeb1560f6b23d.js.map